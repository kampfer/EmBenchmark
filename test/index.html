<html>

<head>
    <title>Embedded Benchmark</title>
</head>

<body>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/lodash.js/4.17.15/lodash.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/platform/1.3.5/platform.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/benchmark/2.1.4/benchmark.min.js"></script>
    <script src="../EmBenchmark.js"></script>

    <script type="text/code" data-setup>
        function someFn(ix) {
            return ix * 5 + 1 / 3 * 8;
        }

        let arr = [];
        for (let i = 0; i < 1000; i++) {
            arr[i] = i;
        }
    </script>

    <script type="text/code" data-test="For loop, basic">
        for (var i = 0; i < arr.length; i++) {
            someFn(arr[i]);
        }
    </script>

    <script type="text/code" data-test="For loop, cached">
        for (var i = 0, len = arr.length; i < len; i++) {
            someFn(arr[i]);
        }
    </script>

    <script type="text/code" data-test="ForEach loop">
        arr.forEach(function (item) {
            someFn(item);
        });
    </script>

    <script>

        EmBenchmark.createEmBenchmark('loop');

    </script>
</body>

</html>